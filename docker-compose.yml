services:
  postgres:
    image: postgres:15-alpine
    container_name: theseatline-postgres
    environment:
      POSTGRES_DB: TheSeatLineDb
      POSTGRES_USER: theseatline
      POSTGRES_PASSWORD: StrongPassword123!
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  pgadmin:
    image: dpage/pgadmin4
    container_name: theseatline-pgadmin
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@theseatline.com
      PGADMIN_DEFAULT_PASSWORD: admin123
    ports:
      - "5050:80"
    volumes:
      - pgadmin_data:/var/lib/pgadmin
    depends_on:
      - postgres

  # api-dev:
  #   image: mcr.microsoft.com/dotnet/sdk:8.0
  #   container_name: theseatline-api-dev
  #   working_dir: /app
  #   volumes:
  #     - ./:/app
  #   environment:
  #     ASPNETCORE_ENVIRONMENT: Development
  #     ASPNETCORE_URLS: http://+:5000
  #     ConnectionStrings__DefaultConnection: Host=postgres;Port=5432;Database=TheSeatLineDb;Username=theseatline;Password=StrongPassword123!
  #   ports:
  #     - "5000:5000"
  #   depends_on:
  #     - postgres
  #   command: >
  #     bash -c "
  #       dotnet restore &&
  #       dotnet watch run --project src/Presentation/API/TheSeatLine.API/TheSeatLine.API.csproj --urls http://*:5000
  #     "

  # angular-dev:
  #   image: node:20-alpine
  #   container_name: theseatline-angular-dev
  #   working_dir: /app
  #   volumes:
  #     - ./src/TheSeatLine.Web:/app
  #     - /app/node_modules
  #   ports:
  #     - "4200:4200"
  #   command: >
  #     sh -c "
  #       npm install &&
  #       npm start -- --host 0.0.0.0
  #     "

volumes:
  postgres_data:
  pgadmin_data:
